<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>サイトウ速度テスト</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Netflix Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background: #f8f8f8;
            color: #000;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            min-height: 100vh;
            padding: 10px 20px;
            max-width: 100%;
            overflow-x: hidden; /* 横スクロールを防止 */
        }

        .header {
            width: 100%;
            max-width: 1200px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 15px 20px;
            position: relative;
            gap: 12px;
        }

        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            margin-bottom: 5px;
        }

        .logo-text {
            font-size: 32px;
            font-weight: 700;
            color: #000;
            letter-spacing: -1px;
        }

        .header-right {
            display: flex;
            gap: 15px;
            align-items: center;
            font-size: 14px;
            color: #666;
        }

        .header-right a {
            color: #666;
            text-decoration: none;
        }

        .header-right a:hover {
            color: #000;
        }

        .header-right span {
            color: #ccc;
        }

        .main-content {
            text-align: center;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            max-width: 100%;
        }

        .status-title {
            font-size: 25px;
            color: #000;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .speed-container {
            position: relative;
            margin-bottom: 5px;
            display: flex;
            align-items: baseline;
            justify-content: center;
            flex-wrap: wrap; /* 小さい画面で改行させる */
            gap: 8px;
        }

        .speed-number {
            font-size: 150px;
            font-weight: 700;
            line-height: 1;
            color: #000;
            transition: all 0.3s ease;
            letter-spacing: 0px;
        }

        .speed-unit {
            font-size: 48px;
            font-weight: 700;
            color: #000;
            margin-left: 10px;
        }

        .reload-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border: 3px solid #00d800;
            border-radius: 50%;
            margin-left: 15px;
            cursor: pointer;
            transition: transform 0.3s ease;
            flex-shrink: 0;
            background: transparent;
        }

        .reload-icon:hover {
            transform: rotate(180deg);
        }

        .reload-icon svg {
            width: 20px;
            height: 20px;
            fill: #000;
            stroke: none;
        }

        .details-button {
            margin-top: 30px;
            padding: 10px 25px;
            font-size: 14px;
            background: transparent;
            border: 2px solid #ccc;
            color: #666;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .details-button:hover {
            background: #f0f0f0;
            border-color: #999;
        }

        .social-icons {
            display: flex;
            gap: 12px;
            margin-top: 30px;
        }

        .social-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .social-icon:hover {
            background: #333;
        }

        .social-icon svg {
            width: 22px;
            height: 22px;
            fill: white;
        }

        .social-icon:first-child svg {
            width: 40px;
            height: 40px;
        }

        .footer {
            width: 100%;
            text-align: right;
            padding: 15px 40px;
            font-size: 11px;
            color: #999;
        }

        .footer-logo {
            color: #e50914;
            font-weight: 700;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .measuring {
            animation: pulse 1.5s ease-in-out infinite;
        }

        @media (max-width: 768px) {
            .speed-number {
                font-size: 120px;
            }
            .speed-unit {
                font-size: 40px;
            }
            .logo-text {
                font-size: 32px;
            }
            .status-title {
                font-size: 18px;
            }
        }

        @media (max-width: 480px) {
            .speed-number {
                font-size: 80px;
            }
            .speed-unit {
                font-size: 28px;
            }
        }

        /* 追加の小型デバイス用調整 */
        @media (max-width: 420px) {
            body {
                padding: 8px 12px;
            }
            .header {
                padding: 10px 12px;
                align-items: center;
            }
            .logo-text {
                font-size: 24px;
            }
            .status-title {
                font-size: 16px;
            }
            .speed-number {
                font-size: 56px;
            }
            .speed-unit {
                font-size: 20px;
            }
            .reload-icon {
                width: 34px;
                height: 34px;
                border-width: 2px;
            }
            .social-icons {
                gap: 8px;
            }
            .social-icon {
                width: 36px;
                height: 36px;
            }
            .details-button {
                padding: 8px 16px;
                font-size: 13px;
            }
        }

        @media (max-width: 360px) {
            .speed-number {
                font-size: 48px;
            }
            .speed-unit {
                font-size: 18px;
            }
            .logo-text {
                font-size: 20px;
            }
            .status-title {
                font-size: 14px;
            }
        }

        @media (max-width: 768px) and (orientation: landscape) {
            .speed-number {
                font-size: 80px;
            }
            .speed-unit {
                font-size: 30px;
            }
            .logo-text {
                font-size: 24px;
            }
            .status-title {
                font-size: 14px;
            }
        }

        @media (max-width: 480px) and (orientation: landscape) {
            .speed-number {
                font-size: 60px;
            }
            .speed-unit {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo-text">sayto.com</div>
        <div class="header-right">
            <a href="#">日本語</a>
            <span>・</span>
            <a href="#">プライバシー</a>
        </div>
    </div>

    <div class="main-content">
        <div class="status-title" id="statusTitle">お使いのサイトウの速度:</div>
        
        <div class="speed-container">
            <div class="speed-number" id="speedNumber">...</div>
            <div class="speed-unit" id="speedUnit">phowa/s</div>
            <div class="reload-icon" onclick="location.reload()">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                </svg>
            </div>
        </div>

        <button class="details-button">詳細を表示</button>

        <div class="social-icons">
            <div class="social-icon">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="10" fill="#666"/>
                    <text x="12" y="17.5" text-anchor="middle" font-size="16" font-weight="bold" fill="white" font-family="Arial, sans-serif">?</text>
                </svg>
            </div>
            <div class="social-icon">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
                </svg>
            </div>
            <div class="social-icon">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
                </svg>
            </div>
        </div>
    </div>

    <div class="footer">
        POWER OF <span class="footer-logo">NYORAI</span>
    </div>

    <script>
        // 数字をフォーマットする関数（有効数字4桁、接頭辞付き）
        function formatNumber(num) {
            const absNum = Math.abs(num);
            let value, prefix;
            
            if (absNum >= 1e30) {
                value = (num / 1e30).toPrecision(6);
                prefix = 'Q';
            } else if (absNum >= 1e27) {
                value = (num / 1e27).toPrecision(6);
                prefix = 'R';
            } else if (absNum >= 1e24) {
                value = (num / 1e24).toPrecision(6);
                prefix = 'Y';
            } else if (absNum >= 1e21) {
                value = (num / 1e21).toPrecision(6);
                prefix = 'Z';
            } else if (absNum >= 1e18) {
                value = (num / 1e18).toPrecision(6);
                prefix = 'E';
            } else if (absNum >= 1e15) {
                value = (num / 1e15).toPrecision(6);
                prefix = 'P';
            } else if (absNum >= 1e12) {
                value = (num / 1e12).toPrecision(6);
                prefix = 'T';
            } else if (absNum >= 1e9) {
                value = (num / 1e9).toPrecision(6);
                prefix = 'G';
            } else if (absNum >= 1e6) {
                value = (num / 1e6).toPrecision(6);
                prefix = 'M';
            } else if (absNum >= 1e3) {
                value = (num / 1e3).toPrecision(6);
                prefix = 'k';
            } else {
                value = num.toPrecision(6);
                prefix = '';
            }
            
            return { value, prefix };
        }

        // Google Sheets APIから値を取得して数字を表示
        async function loadSpeed() {
            try {
                const response = await fetch('https://sheets.googleapis.com/v4/spreadsheets/1oa6Qbkp66DVlC61aVP8UKc5QDFTIKkKkoE9xbtkmGgc/values/Sheet1!A1?key=AIzaSyDX2HzAe8eJgj3CtPtEOtqbsgxoQpd_i2c');
                const data = await response.json();
                const speedNumber = document.getElementById('speedNumber');
                const speedUnit = document.getElementById('speedUnit');
                
                // values[0][0]から数字を取得
                if (data.values && data.values[0] && data.values[0][0]) {
                    const number = parseFloat(data.values[0][0]);
                    
                    if (!isNaN(number)) {
                        const { value, prefix } = formatNumber(number);
                        speedNumber.textContent = value + prefix;
                        speedUnit.textContent = 'phowa/s';
                    } else {
                        speedNumber.textContent = '---';
                        speedUnit.textContent = 'phowa/s';
                    }
                } else {
                    speedNumber.textContent = '---';
                    speedUnit.textContent = 'phowa/s';
                }
            } catch (error) {
                console.error('速度データの取得に失敗しました:', error);
                document.getElementById('speedNumber').textContent = '---';
                document.getElementById('speedUnit').textContent = 'phowa/s';
            }
        }

        // ページ読み込み時に実行
        window.addEventListener('load', loadSpeed);
    </script>
</body>
</html>
